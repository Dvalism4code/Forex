{% extends 'account/users/dashboard.html' %}



{% block side-panel-right %}
    
{% endblock side-panel-right %}
    
  
  {% block trading_view %}
    
  {% endblock trading_view %}



{% block main %}
{% load static  %}

<div class="fixed-width"><br><br><br>
    <br>
    <script>
        $(".select7").select7();
    </script>
<style>
.container {
    padding: 15px;
    background: var(--dark-blue);
    border-radius: 5px;
    color: var(--text-color);
   
}

form label {
    margin: 30px 0;
}
form input {
    padding: 10px; 
    border-radius: 3px;
    border: 1px solid var(--hover);
    display: block;
    width: 100%;
    background: var(--primary);
    color: var(--text-color);
    margin: 10px 0;
    font-size: 12px;
}
span {
        display: block;
        font-size: small;
        font-style: italic;
    }

form button {
    background: dodgerblue;
    padding: 10px;
    display: flex;
    align-items: center;
    color: white;
    border: 1px solid dodgerblue;
    border-radius: 3px;
    margin: 40px 0;
    font-weight: 400;
}
button:hover{
    cursor: pointer;
}

</style>


<style>
    @media screen and (min-width: 768px) {
        .fixed-width {
            width: 100%;
            margin: 30px 30px;
        }
        
        .side-panel-right {
            display: none;
            width: 30%;
        }

        .container {
            width: 50%;
            margin: 0 auto;
            height: 500px;
            padding: 20px;
        }

        h4 {
    font-size: 2rem;
    font-weight: 800;
}

        form input{
            padding: 20px;
            margin-bottom: 10px;
        }

        
        form label {
           padding-bottom: 30px;
            font-weight: bold;
            font-size: 1.4rem;
        }

        .form-pin {
            margin-bottom: 35px;
        }

        
    }

    @media screen and (min-width: 1200px) {
        .fixed-width {
            width: 80%;
            transform: translateX(5%);
            margin: 0 15%;
        }

        .side-panel-left {
            width: 20%;
            display: block;
        }
        .container {
            width: 50%;
            margin: 0 auto;
            height: 500px;
        }


        h4 {
    font-size: 2rem;
    font-weight: 800;
}

        form input{
            padding: 20px;
            margin-bottom: 10px;
        }

        
        form label {
           
            font-weight: bold;
            font-size: 1.4rem;
        }

        .form-pin {
            margin-bottom: 35px;
        }
       
    }
</style>

<div class="container">


    <h4>Set Withdrawal Pin </h4><br>
    <form action="{% url 'set_withdrawal_pin' %}" method="POST" enctype="multipart/form-data" id="form">
        {% csrf_token %}
        
        <!-- Non-field errors -->
      
        {% if messages %}
        <div class="messages-container">
            {% for message in messages %}
            <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}


        {% if form.non_field_errors %}
        <div class="error-message" style="color: red; margin-bottom: 15px;">
            {{ form.non_field_errors }}
        </div>
        {% endif %}
    
        <div class="form-pin">
            <label for="{{ form.new_pin.id_for_label }}">PIN</label>
            {{ form.new_pin }}
            {% if form.new_pin.errors %}
            <div class="error-message" style="color: red; font-size: 0.9em; margin-top: 5px;">
                {{ form.new_pin.errors.0 }}  <!-- Shows first error only -->
            </div>
            {% endif %}
        </div>
    
        <div class="form-pin">
            <label for="{{ form.confirm_pin.id_for_label }}">Confirm PIN</label>
            {{ form.confirm_pin }}
            {% if form.confirm_pin.errors %}
            <div class="error-message" style="color: red; font-size: 0.9em; margin-top: 5px;">
                
            </div>
            {% endif %}
        </div>
    
        
        <button type="submit" id="pinBtn">Create Pin</button>
    </form>
</div>


<script>
    /*const pin = document.getElementById('pin');
   const confirm_pin = document.getElementById('confirm_pin');
   const form = document.getElementById('form');
   const pin_error = document.getElementById('error-message');
   const pattern = /^\d{4}$/;
   form.addEventListener('submit', (e) => {
    if (isNaN(pin.value) || isNaN(confirm_pin.value)) {
        e.preventDefault();
        pin_error.innerHTML = 'Enter a number';
        pin.style.outline = '1px solid red';
        confirm_pin.style.outline = '1px solid red';
        confirm_error.innerHTML = 'Enter a number';
    }
    
    if (!pattern.test(pin.value)){
        e.preventDefault();
        pin_error.innerHTML = 'PIN must be 4 digits';
    }

    if(pin.value !== confirm_pin.value){
        e.preventDefault();
        pin_error.innerHTML = 'PINs do not match';
        pin.style.outline = '1px solid red';
        confirm_pin.style.outline = '1px solid red';
        confirm_error.innerHTML = 'PINs do not match';
    }
   })
   */
 </script>


{% endblock main %}

